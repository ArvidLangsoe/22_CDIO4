$(document).ready(function(){$("body").load("src/login.html");$(document).on("submit","#login_form",function(d){d.preventDefault();var b=$("#user_id").val();var a=getUser(b);var c;$.ajax({url:"rest/login/login-user",type:"POST",contentType:"application/json",data:$(this).serializeJSON(),success:function(e){if(e=="super_admin"||e=="logged_in"){console.log(a.getJson());$.get("src/master.html",function(g,h,f){$("body").html(Mustache.render($(g).html(),a.getJson()))})}else{console.log(e)}},error:function(e){console.log(e)}})})});$(document).ready(function(){$(document).on("click",".user_edit_link",function(b){b.preventDefault();var a=$(this).parents("tr").children("td:first").text();$.ajax({url:"rest/CRUD/get-user",type:"POST",data:a,contentType:"application/json",success:function(c){console.log(c);$(".users-page").load("user-edit.html",function(){$("#user_id").val(c.userId);$("#name").val(c.userName);$("#initials").val(c.ini);$("#cpr").val(c.cpr);$("#rolle").val(c.roles)})},error:function(c){console.log(c);alert("fail data: "+c)}});return false});$(document).on("click",".user-delete",function(b){b.preventDefault();var a=$(this).parents("tr").children("td:first").text();$.ajax({url:"rest/CRUD/delete-user",type:"DELETE",data:a,contentType:"application/json",success:function(c){showUserListPage()},error:function(c){console.log(c);alert("fail data: "+c)}});return false});$(document).on("submit",".user-edit-page form",function(a){a.preventDefault();$.ajax({url:"rest/CRUD/edit-user",type:"PUT",contentType:"application/json",data:$(this).serializeJSON(),success:function(b){$(".users-page").load("user-list.html",function(){showUserListPage()})},error:function(b){console.log(b);alert("fail data: "+b)}});return false});$(document).on("submit",".user-create-page form",function(a){a.preventDefault();$.ajax({url:"rest/CRUD/create-user",type:"POST",contentType:"application/json",data:$(this).serializeJSON(),success:function(b){$(".users-page").load("user-list.html",function(){showUserListPage()})},error:function(b){console.log(b);alert("fail data: "+b)}});return false})});function getUser(b){var a;$.ajax({url:"rest/user/get-user",type:"POST",data:b,contentType:"application/json",success:function(c){a=c},error:function(c){console.log("Fejl! "+c)}});return{getJson:function(){if(a){return a}}}};