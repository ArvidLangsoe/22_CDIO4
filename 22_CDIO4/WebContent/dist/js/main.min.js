$(document).ready(function(){$("body").load("src/login.html");$(document).on("submit","#login_form",function(b){b.preventDefault();var a=$("#user_id").val();$.ajax({url:"rest/login/login-user",type:"POST",contentType:"application/json",data:$(this).serializeJSON(),success:function(c){if(c=="super_admin"||c=="logged_in"){$("body").load("src/master.html",function(){console.log(a);getUser(a)})}else{console.log(c)}},error:function(c){console.log(c)}})})});$(document).ready(function(){$(document).on("click",".user_edit_link",function(b){b.preventDefault();var a=$(this).parents("tr").children("td:first").text();$.ajax({url:"rest/CRUD/get-user",type:"POST",data:a,contentType:"application/json",success:function(c){console.log(c);$(".users-page").load("user-edit.html",function(){$("#user_id").val(c.userId);$("#name").val(c.userName);$("#initials").val(c.ini);$("#cpr").val(c.cpr);$("#rolle").val(c.roles)})},error:function(c){console.log(c);alert("fail data: "+c)}});return false});$(document).on("click",".user-delete",function(b){b.preventDefault();var a=$(this).parents("tr").children("td:first").text();$.ajax({url:"rest/CRUD/delete-user",type:"DELETE",data:a,contentType:"application/json",success:function(c){showUserListPage()},error:function(c){console.log(c);alert("fail data: "+c)}});return false});$(document).on("submit",".user-edit-page form",function(a){a.preventDefault();$.ajax({url:"rest/CRUD/edit-user",type:"PUT",contentType:"application/json",data:$(this).serializeJSON(),success:function(b){$(".users-page").load("user-list.html",function(){showUserListPage()})},error:function(b){console.log(b);alert("fail data: "+b)}});return false});$(document).on("submit",".user-create-page form",function(a){a.preventDefault();$.ajax({url:"rest/CRUD/create-user",type:"POST",contentType:"application/json",data:$(this).serializeJSON(),success:function(b){$(".users-page").load("user-list.html",function(){showUserListPage()})},error:function(b){console.log(b);alert("fail data: "+b)}});return false})});function getUser(a){$.ajax({url:"rest/user/get-user",type:"POST",data:a,contentType:"application/json",success:function(b){console.log(b);console.log("Rolle: "+b.rolle)},error:function(b){console.log("Fejl! "+b)}})};